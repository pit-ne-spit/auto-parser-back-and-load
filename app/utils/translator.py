"""Chinese to Russian translator using dictionary lookup."""

from typing import Dict, Any, Union


# Словарь переводов с китайского на русский
TRANSLATIONS_CN_RU = {
    # Общие автомобильные термины
    "胎压监测装置": "Система контроля давления в шинах",
    "主动刹车/主动安全系统": "Активное торможение/Система активной безопасности",
    "ISOFIX儿童座椅接口": "Крепление детского кресла ISOFIX",
    "自动驻车": "Автоматический стояночный тормоз",
    "方向盘换挡": "Подрулевые лепестки переключения передач",
    "蓝牙/车载电话": "Bluetooth/Телефон в автомобиле",
    "车内PM2.5过滤装置": "Фильтр PM2.5 для салона",
    "后排出风口": "Вентиляционные отверстия для задних пассажиров",
    "自动泊车入位": "Автоматическая парковка",
    "无钥匙启动系统": "Система запуска без ключа",
    "主动闭合式进气格栅": "Активные жалюзи радиаторной решетки",
    
    # Группы параметров конфигурации
    "基本参数": "Основные параметры",
    "车身": "Кузов",
    "发动机": "Двигатель",
    "变速箱": "Коробка передач",
    "底盘转向": "Шасси и рулевое управление",
    "车轮制动": "Колеса и тормоза",
    
    # Параметры конфигурации
    "车型名称": "Название модели",
    "厂商指导价(元)": "Рекомендованная цена производителя (юани)",
    "厂商": "Производитель",
    "级别": "Класс",
    "能源类型": "Тип топлива",
    "环保标准": "Экологический стандарт",
    "上市时间": "Дата выпуска",
    "最大功率(kW)": "Максимальная мощность (кВт)",
    "最大扭矩(N·m)": "Максимальный крутящий момент (Н·м)",
    "长*宽*高(mm)": "Длина*Ширина*Высота (мм)",
    "车身结构": "Тип кузова",
    "最高车速(km/h)": "Максимальная скорость (км/ч)",
    "官方0-100km/h加速(s)": "Разгон 0-100 км/ч (сек)",
    "NEDC综合油耗(L/100km)": "Расход топлива NEDC (л/100км)",
    "整车质保": "Гарантия на автомобиль",
    "首任车主质保政策": "Гарантийная политика для первого владельца",
    "长度(mm)": "Длина (мм)",
    "宽度(mm)": "Ширина (мм)",
    "高度(mm)": "Высота (мм)",
    "轴距(mm)": "Колесная база (мм)",
    "前轮距(mm)": "Колея передних колес (мм)",
    "后轮距(mm)": "Колея задних колес (мм)",
    "车门数(个)": "Количество дверей",
    "座位数(个)": "Количество мест",
    "油箱容积(L)": "Объем топливного бака (л)",
    "后备厢容积(L)": "Объем багажника (л)",
    "整备质量(kg)": "Снаряженная масса (кг)",
    "发动机型号": "Модель двигателя",
    "排量(mL)": "Объем двигателя (мл)",
    "排量(L)": "Объем двигателя (л)",
    "进气形式": "Тип наддува",
    "发动机布局": "Расположение двигателя",
    "气缸排列形式": "Расположение цилиндров",
    "气缸数(个)": "Количество цилиндров",
    "每缸气门数(个)": "Клапанов на цилиндр",
    "配气机构": "Газораспределительный механизм",
    "最大马力(Ps)": "Максимальная мощность (л.с.)",
    "最大功率转速(rpm)": "Обороты максимальной мощности (об/мин)",
    "最大扭矩转速(rpm)": "Обороты максимального крутящего момента (об/мин)",
    "最大净功率(kW)": "Максимальная чистая мощность (кВт)",
    "燃料形式": "Тип топлива",
    "燃油标号": "Марка топлива",
    "供油方式": "Система подачи топлива",
    "缸盖材料": "Материал головки блока цилиндров",
    "缸体材料": "Материал блока цилиндров",
    "挡位个数": "Количество передач",
    "变速箱类型": "Тип коробки передач",
    "简称": "Сокращение",
    "驱动方式": "Тип привода",
    "四驱形式": "Тип полного привода",
    "中央差速器结构": "Конструкция межосевого дифференциала",
    "前悬架类型": "Тип передней подвески",
    "后悬架类型": "Тип задней подвески",
    "助力类型": "Тип усилителя рулевого управления",
    "前制动器类型": "Тип передних тормозов",
    "后制动器类型": "Тип задних тормозов",
    "驻车制动类型": "Тип стояночного тормоза",
    "前轮胎规格": "Размер передних шин",
    "后轮胎规格": "Размер задних шин",
    "备胎规格": "Размер запасного колеса",
    
    # Дополнительные секции
    "内部配置": "Внутренняя комплектация",
    "多媒体配置": "Мультимедийная комплектация",
    "空调配置": "Система кондиционирования",
    "安全配置": "Системы безопасности",
    "辅助/操控配置": "Вспомогательные/Системы управления",
    "外部/防盗配置": "Внешняя/Противоугонная комплектация",
    
    # Проверка и обслуживание
    "维修保养查询": "Запрос на обслуживание",
    "记录全透明，拒绝事故车": "Полная прозрачность записей, исключение аварийных автомобилей",
    "记录查询": "Запрос записей",
    
    # Теги карты
    "过户次数": "Количество перерегистраций",
    "里程": "Пробег",
    "车龄": "Возраст автомобиля",
    "三年保值率": "Сохранение стоимости за 3 года",
    "很少": "Очень мало",
    "少": "Мало",
    "低": "Низкий",
    "一般": "Средний",
    "长": "Длинный",
    
    # Кредит
    "分期购车": "Покупка в рассрочку",
    "超低首付开回家": "Очень низкий первоначальный взнос, забирайте домой",
    "期": "Период",
    "12期": "12 периодов",
    "24期": "24 периода",
    "36期": "36 периодов",
    "48期": "48 периодов",
    "分期": "Рассрочка",
    "上牌": "Регистрация",
    "提车": "Получение автомобиля",
    
    # Неисправности
    "车况排查报告查询": "Запрос отчета о проверке состояния автомобиля",
    "碰撞时间、修复金额、修复明细": "Время столкновения, стоимость ремонта, детали ремонта",
    
    # Рейтинги
    "本地同级销量榜第1名": "1 место в рейтинге продаж местного сегмента",
    "本地同级保值榜第6名": "6 место в рейтинге сохранения стоимости местного сегмента",
    "中山市中型车销量榜第1名": "1 место в рейтинге продаж средних автомобилей города Чжуншань",
    
    # Анализ цены
    "符合相似车源均价": "Соответствует средней цене похожих автомобилей",
    "价格实惠抢手  浏览人数较多": "Доступная цена, популярный, много просмотров",
    "根据汽车之家大数据分析，价格符合相似车源的平均报价。您可以结合这辆车的车龄、里程、配置和车况，来判断价格情况。": "Согласно анализу больших данных Autohome, цена соответствует средней цене похожих автомобилей. Вы можете оценить цену, учитывая возраст автомобиля, пробег, комплектацию и состояние.",
    
    # Анализ стоимости
    "本车保值率较高，预计未来三年内价格相对平稳。": "Этот автомобиль имеет высокую сохранность стоимости, ожидается относительно стабильная цена в течение следующих трех лет.",
    "该车过户次数为0次，属于一手好车,保值率较高，预计未来三年内价格相对平稳": "Этот автомобиль имеет 0 перерегистраций, является автомобилем первого владельца с высокой сохранностью стоимости, ожидается относительно стабильная цена в течение следующих трех лет",
    
    # Бизнес
    "以旧换新": "Обмен старого на новое",
    "用旧车置换 省钱又省心": "Обмен старого автомобиля, экономия денег и забот",
    "首付4.08万 轻松开回家": "Первоначальный взнос 40,800, легко забирайте домой",
    "查月供": "Проверить ежемесячный платеж",
    "事故排查": "Проверка на аварии",
    "快速规避事故车": "Быстро избежать аварийных автомобилей",
    "该车可迁入 中山": "Этот автомобиль может быть зарегистрирован в Чжуншане",
    "寄存于中山仓": "Хранится на складе в Чжуншане",
    "3成首付4.08万起，超值购车": "30% первоначальный взнос от 40,800, выгодная покупка",
    "轻松开回家 首付4.08万 月供3071元": "Легко забирайте домой, первоначальный взнос 40,800, ежемесячный платеж 3,071 юаней",
    
    # Общие значения
    "汽油": "Бензин",
    "汽油+48V轻混系统": "Бензин + 48V легкая гибридная система",
    "涡轮增压": "Турбонаддув",
    "三厢车": "Седан",
    "中型车": "Средний класс",
    "紧凑型车": "Компактный класс",
    "大型车": "Полноразмерный класс",
    "中大型MPV": "Среднеразмерный MPV",
    "中型SUV": "Среднеразмерный SUV",
    "紧凑型SUV": "Компактный SUV",
    "手自一体变速箱(AT)": "Автоматическая коробка передач (АКПП)",
    "前置后驱": "Переднемоторная компоновка, задний привод",
    "前置前驱": "Переднемоторная компоновка, передний привод",
    "前置四驱": "Переднемоторная компоновка, полный привод",
    "多连杆式独立悬架": "Многорычажная независимая подвеска",
    "电动助力": "Электрический усилитель рулевого управления",
    "承载式": "Несущий кузов",
    "通风盘式": "Вентилируемые дисковые тормоза",
    "盘式": "Дисковые тормоза",
    "电子驻车": "Электронный стояночный тормоз",
    "无": "Нет",
    "铝合金": "Алюминиевый сплав",
    "国VI": "Китай VI",
    "DOHC": "DOHC",
    "SOHC": "SOHC",
    "直喷": "Прямой впрыск",
    "北京奔驰": "Пекин Мерседес-Бенц",
    "奥迪(进口)": "Ауди (импорт)",
    "广汽丰田": "GAC Toyota",
    "上汽通用别克": "SAIC-GM Buick",
    "保时捷": "Порше",
    "大众(进口)": "Фольксваген (импорт)",
    "奇瑞汽车": "Chery Automobile",
    
    # Дополнительные значения
    "奔驰C级 2019款 C 260 运动版": "Mercedes-Benz C-Class 2019 C 260 Sport",
    "9挡手自一体": "9-ступенчатая автоматическая коробка передач",
    "4门5座三厢车": "4-дверный 5-местный седан",
    "三年不限公里": "3 года без ограничения пробега",
    "1.5T 184马力 L4": "1.5T 184 л.с. L4",
    "95号": "95 октан",
    "中山, 西区": "Чжуншань, Западный район",
    "南平, 延平": "Наньпин, Яньпин",
    "北京, ": "Пекин",
    "重庆, ": "Чунцин",
    
    # Дополнительные опции
    "定速巡航": "Круиз-контроль",
    
    # Самые частые непереведенные опции (из анализа 1000 записей)
    "车联网": "Интернет в автомобиле",
    "防紫外线玻璃": "Защитное от ультрафиолета стекло",
    "OTA升级": "OTA обновление",
    "转向辅助灯": "Поворотные фары",
    "倒车影像": "Камера заднего вида",
    "全液晶仪表盘": "Полностью цифровая приборная панель",
    "无钥匙进入系统": "Система входа без ключа",
    "车道偏离预警系统": "Система предупреждения о выезде с полосы",
    "电动后备厢": "Электрический багажник",
    "并线辅助": "Система помощи при перестроении",
    "自适应远近光": "Адаптивный дальний/ближний свет",
    "车道保持辅助系统": "Система помощи удержания полосы",
    "内置行车记录仪": "Встроенный видеорегистратор",
    "转向头灯": "Поворотные фары",
    "车内氛围灯": "Подсветка салона",
    "手机互联/映射": "Подключение/проецирование смартфона",
    "车载空气净化器": "Очиститель воздуха в автомобиле",
    "后排独立空调": "Независимый кондиционер для задних пассажиров",
    "感应后备厢": "Багажник с датчиком открывания",
    "全景摄像头": "Панорамная камера",
    "220V/230V电源": "Розетка 220V/230V",
    "HUD抬头数字显示": "Проекционный дисплей на лобовое стекло",
    "方向盘加热": "Подогрев рулевого колеса",
    "中央差速器锁止": "Блокировка межосевого дифференциала",
    "自适应巡航": "Адаптивный круиз-контроль",
    "电动吸合门": "Электропривод дверей",
    "电动侧滑门": "Электропривод раздвижных дверей",
    "手机无线充电": "Беспроводная зарядка смартфона",
    
    # Адреса (города и районы) - из анализа
    "昆明, 盘龙": "Куньмин, Паньлун",
    "西安, 长安": "Сиань, Чанъань",
    "长沙, 长沙": "Чанша, Чанша",
    "武汉, ": "Ухань",
    "福州, 仓山": "Фучжоу, Цаншань",
    "合肥, 长丰": "Хэфэй, Чанфэн",
    "重庆, 巴南": "Чунцин, Банань",
    "东莞, 寮步镇": "Дунгуань, Ляобучжэнь",
    "成都, ": "Чэнду",
    "石家庄, 新华": "Шицзячжуан, Синьхуа",
    "济南, 历城": "Цзинань, Личэн",
    "郑州, 中原": "Чжэнчжоу, Чжунъюань",
    "南京, ": "Наньцзин",
    "北京, 朝阳": "Пекин, Чаоян",
    "南宁, 西乡塘": "Наньнин, Сисянтан",
    "温州, 瓯海": "Вэньчжоу, Оухай",
    "长沙, ": "Чанша",
    "惠州, 惠城": "Хуэйчжоу, Хуэйчэн",
    "深圳, ": "Шэньчжэнь",
    "郑州, ": "Чжэнчжоу",
    "保定, 竞秀": "Баодин, Цзинсю",
    "武汉, 洪山": "Ухань, Хуншань",
    "苏州, 相城": "Сучжоу, Сянчэн",
    "杭州, 拱墅": "Ханчжоу, Гуншу",
    "厦门, ": "Сямынь",
    "海口, 龙华": "Хайкоу, Лунхуа",
    "青岛, 市北": "Циндао, Шибэй",
    "大连, ": "Далянь",
    "沈阳, ": "Шэньян",
    "哈尔滨, ": "Харбин",
    "长春, ": "Чанчунь",
    "天津, ": "Тяньцзинь",
    "上海, ": "Шанхай",
    "广州, ": "Гуанчжоу",
    "郑州, 惠济": "Чжэнчжоу, Хуэйцзи",
    "佛山, 南海": "Фошань, Наньхай",
    "郑州, 金水": "Чжэнчжоу, Цзиньшуй",
    "柳州, 柳南": "Лючжоу, Люнань",
    "苏州, 吴中": "Сучжоу, Учжун",
    "贵阳, 花溪": "Гуйян, Хуаси",
    "广州, 海珠": "Гуанчжоу, Хайчжу",
    "成都, 双流": "Чэнду, Шуанлю",
    "济南, ": "Цзинань",
    "南通, 崇川": "Наньтун, Чунчуань",
    "北京, 丰台": "Пекин, Фэнтай",
    "合肥, 包河": "Хэфэй, Баохэ",
    "东莞, ": "Дунгуань",
    "武汉, 蔡甸": "Ухань, Цайдянь",
    "武汉, 黄陂": "Ухань, Хуанпи",
    "银川, 贺兰": "Иньчуань, Хэлань",
    "保定, 莲池": "Баодин, Ляньчи",
    "广州, 番禺": "Гуанчжоу, Паньюй",
    "海口, 秀英": "Хайкоу, Сюин",
    "长春, 宽城": "Чанчунь, Куаньчэн",
    
    # Марки и модели
    "大通": "Maxus",
    "长安CS75PLUS": "Changan CS75PLUS",
    "五菱龙卡": "Wuling Longka",
    "荣威i6经典": "Roewe i6 Classic",
    "易至EV2": "Yizhi EV2",
    "标致206": "Peugeot 206",
    "海豹06": "Seal 06",
    "纳米EX1": "Nano EX1",
    "本田CR-Z": "Honda CR-Z",
    "缤果S": "Binguo S",
    "纳米06": "Nano 06",
    "哈弗大狗 PLUS": "Haval Big Dog PLUS",
    "海狮06": "Haisi 06",
    "瑞虎8L": "Tiggo 8L",
    "北京越野BJ40增程": "Beijing Off-Road BJ40 Extended Range",
    "上汽大通MAXUS V100房车": "SAIC Maxus MAXUS V100 RV",
    "小米YU7": "Xiaomi YU7",
    "RE-MAX 瑞迈": "RE-MAX Ruimai",
    
    # Марки
    "智界": "Zhijie",
    "AITO 问界": "AITO Wenjie",
    
    # Описание автомобиля (длинный текст)
    "外观：漆面保养良好，车身结构无修复，无重大事故。 内饰：干净整洁。安全指示灯正常，气囊等被动安全项正常，车辆内电子器件使用良好， 车内静态动态设备完善。 驾驶：车辆点火、起步、提速、过弯、减速、制动均无问题，加速迅猛，动力输出平稳舒 适,无怠速抖动。 整体：整体车况一般。车体骨架结构无变形扭曲、无火烧泡水痕迹。车身有喷漆痕迹，整体漆面良好，排除大事故车辆。视野宽阔，练手选择，空间宽敞明亮通风性好，适合家庭代步车。": "Внешний вид: Лакокрасочное покрытие в хорошем состоянии, структура кузова без ремонта, без серьезных аварий. Салон: Чистый и аккуратный. Индикаторы безопасности в норме, подушки безопасности и другие пассивные системы безопасности в норме, электроника автомобиля работает хорошо, статическое и динамическое оборудование в салоне в порядке. Вождение: Запуск, трогание, ускорение, прохождение поворотов, замедление, торможение без проблем, быстрое ускорение, плавная и комфортная подача мощности, нет вибраций на холостом ходу. Общее: Общее состояние автомобиля среднее. Каркас кузова без деформации и перекосов, без следов пожара или затопления. На кузове есть следы покраски, общее лакокрасочное покрытие хорошее, исключены серьезные аварии. Широкий обзор, хороший выбор для практики, просторный и светлый салон с хорошей вентиляцией, подходит для семейного использования.",
}


def translate_text(text: str) -> str:
    """
    Перевести китайский текст на русский язык используя словарь.
    
    Args:
        text: Текст для перевода
        
    Returns:
        Переведенный текст или оригинал, если перевод не найден
    """
    if not isinstance(text, str):
        return text
    
    # Проверяем точное совпадение в словаре
    if text in TRANSLATIONS_CN_RU:
        return TRANSLATIONS_CN_RU[text]
    
    # Возвращаем оригинал, если перевод не найден
    return text


def translate_dict(obj: Union[Dict[str, Any], list, Any]) -> Union[Dict[str, Any], list, Any]:
    """
    Рекурсивно перевести все китайские тексты в словаре/списке на русский.
    
    Args:
        obj: Объект для перевода (dict, list или другой тип)
        
    Returns:
        Объект с переведенными текстами
    """
    if isinstance(obj, dict):
        result = {}
        for key, value in obj.items():
            if isinstance(value, (dict, list)):
                result[key] = translate_dict(value)
            elif isinstance(value, str):
                result[key] = translate_text(value)
            else:
                result[key] = value
        return result
    elif isinstance(obj, list):
        return [translate_dict(item) for item in obj]
    else:
        return obj


def translate_field(value: Any, field_name: str = None) -> Any:
    """
    Перевести значение поля, если это строка.
    
    Args:
        value: Значение для перевода
        field_name: Имя поля (для логирования, опционально)
        
    Returns:
        Переведенное значение или оригинал
    """
    if isinstance(value, str):
        return translate_text(value)
    elif isinstance(value, (dict, list)):
        return translate_dict(value)
    else:
        return value
